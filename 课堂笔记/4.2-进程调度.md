# 进程调度

[操作系统-------进程和线程调度算法+调度算法的评价指标(周转时间，等待时间等等)](https://blog.csdn.net/u014453898/article/details/108707528)

## 度量指标

1. 吞吐量：作业数/总执行时间
2. 周转时间：完成时间-提交时间
3. 带权周转时间：周转时间/服务时间（执行时间）
4. 平均周转时间：一组作业周转时间之和/作业数
5. 平均带权周转时间：一组作业带权周转时间之和/作业数
6. 响应时间：用户输入一个请求（如击键）到系统给出首次响应（如屏幕显示）的时间

## 批处理系统的调度算法

1. 先来先服务（First Come First Serve）
2. 短作业优先（Shortest Job First）
3. 最短剩余时间（Shortest Remaining Time Next）
4. 最高响应比优先（Highest Response Ratio Next）

### 先来先服务

**FCFS的特点：**
• 公平，容易理解和实现
• 有利于长作业(但会导致吞吐量受限)。
• 有利于计算密集型作业，不利于I/O密集型作业

### 短作业优先

**最小化**平均响应时间

优点：
• 比FCFS改善平均周转时间和平均带权周转时间，缩短作业的等待时间；
• 当作业**同时可运行**，**周转时间**最优
• 提高系统的吞吐量


缺点：
• 对长作业非常不利，可能长时间得不到执行；
• 难以准确估计作业（进程）的执行时间
• 如果正在执行进程很慢，新来的短作业无法执行

### 最短剩余时间

将短作业优先进行改进，改进为**抢占式**，这就是最短剩余时间优先算法了。当一个新就绪的进程到达时，如果它比当前运行进程具有更短的完成时间，系统抢占当前进程，选择新就绪的进程执行。

### 最高响应比优先

HRRN（Highest Response Ratio Next）是FCFS算法和SJF算法的折衷。既考虑作业的运行时间，有考虑作业的等待时间。照顾短作业的同时又避免饿死长作业。

每次进行调度时，先计算后备作业队列每个作业的响应优先级，然后优先级最大的作业运行
Response Priority: RP=1+已等待时间/要求运行时间

响应比的计算时机：
• 每当调度一个作业运行时，都要计算后备作业队列中每个作业的响应比，选择响应比最高者投入运行。

响应比最高优先（HRRN）算法效果：
• 短作业容易得到较高的响应比
• 长作业等待时间足够长后，也将获得足够高的响应比
• 饥饿现象不会发生

缺点：
• 每次计算各道作业的响应比会有一定的时间开销，性能比SJF略差。

## 交互式系统的调度算法

1. 时间片轮转算法（Round Robin）
2. 优先级调度(Priority Scheduling)

### 时间片轮转算法

将系统中所有的就绪进程按照FCFS原则，排成一个队列。
§ 每次调度时将CPU分派给队首进程，让其执行一个时间片。时间片的长度从几个ms到几百ms。
§ 如果进程在时间片结束前阻塞或者结束，会立刻进行CPU切换。
§ 在一个时间片结束时，发生**时钟中断（抢占式）**。
§ 如果时钟中断发生时进程还在运行，将其送到就绪队列的末尾，并通过上下文切换执行当前的队首进程。

### 优先级算法

静态优先级：进程创建时指定，运行过程中不再改变

动态优先级：进程创建时指定了一个优先级，运行过程中可以动态变化。如：等待时间较长的进程可提升其优先级。

在进程运行过程中可以动态改变优先级，以便获得更好的调度性能。如：
• 在就绪队列中，等待时间越长则优先级提高，从而使优先级较低的进程在等待足够的时间后，其优先级提高到可被调度执行；
• 进程每执行一个时间片，就降低其优先级，从而一个进程持续执行时，其优先级逐步降低到出让CPU。

## 实时系统的调度算法

问题描述：

* 很多任务，每个任务执行具有周期性
* 每个任务在下一次周期来临前，必须执行完上一个周期。

比如人每5个小时吃一次饭，每次吃饭用时20分钟。现在有10个人，一个位置，每次只允许一个人吃饭，要求每个人每次吃饭前，上一顿饭必须吃完。

### 单速率调度

RMS是**单处理器**下的**最优静态调度**算法。

也就是说，静态优先级下，这个算法是最优的。

详细的解析可以看这篇[文章](http://www.ryxxff.com/68162.html)。

* 1973年Liu和Layland首次提出了RMS调度算法。
* 在静态调度中的最优性。
* 它的一个特点是可通过对系统资源利用率的计算来进行任务可调度性分析,算法简单、有效, 便于实现。
* 每个周期性任务会分配一个优先级，它与其周期成反比，即周期越短，优先级越高；周期越长，优先级越低。（优先级为静态的不改变）
* 当较低优先级的进程正在运行并且**较高优先级的进程可以运行**时，较高优先级进程将会**抢占**低优先级

### 最早截止时间优先算法

EDF：Earliest Deadline First

任务的绝对截止时间越早，其优先级越高，优先级最高的任务最先被调度

组织了一个优先级队列，如果两个任务的优先级一样，当调度它们时，EDF算法将随机选择一个调度

## 多处理机调度
