# 引论

本文结构

```bash
什么是操作系统
操作系统的历史
操作系统的类型
操作系统的基本实现机制
操作系统的特征
操作系统的功能
操作系统的结构
常用的操作系统
```

本文部分内容转载自[北航操作系统总复习-Hero13146688的博客](https://blog.csdn.net/weixin_43723467/article/details/91374265?)。

1. 操作系统定义：操作系统是一组管理计算机硬件资源的软件集合，它向计算机程序提供共性的服务。
2. 批处理：把用户提交的作业成批送入计算机，由**作业调度程序**自动选择作业运行。作用：a)缩短作业之间的交接时间, b) 减少处理机的空闲等待，提高系统效率
3. 单道程序：同一时间内存中只有一个程序。多道程序：内存空间中同时驻留多道程序。
4. 分时：分时是指多个用户分享使用同一台计算机。多个程序分时共享硬件和软件资源。
5. 冯诺依曼体系结构：存储程序式
6. 操作系统工作模式：内核态(管态)，用户态(目态)，切换过程：通过异常(陷阱或中断)，进入内核态。

10、

12、操作系统内核：是一个操作系统的核心。它负责管理系统的进程、内存、设备驱动程序、文件和网络系统，决定着系统的性能和稳定性。通过异常来陷入内核态。

## 操作系统的历史

### 批处理

> 根据我自己的理解，这时的计算机还很简单，什么“文件”、“页式存储”、“程序”的思想都没有建立起来，就是从一个存储介质上，读取二进制，然后CPU跑出结果，输出到磁带上。

把用户提交的作业成批送入计算机，由**作业调度程序**自动选择作业运行。

目的：

1. 缩短作业之间的交接时间
2. 减少处理机的空闲等待，提高系统效率

**批处理系统**：加载在计算机上的一个**系统软件**，在它的控制下，计算机能够自动地、成批地处理一个或多
个用户的作业（这作业包括程序、数据和命令）。

它又分为两个阶段：**联机批处理系统**和**脱机批处理系统**。

首先出现的是联机批处理系统，即作业的输入/输出由CPU来处理。为克服与缓解高速主机与慢速外设的矛盾，提高CPU的利用率，又引入了脱机批处理系统，即输入/输出脱离主机控制。

#### 联机批处理系统

在主机与输入机之间增加一个存储设备——磁带，在运行于主机上的**监督程序**的自动控制下，计算机可自动完成以下任务：

成批地把输入机上的用户作业读入磁带，依次把磁带上的用户作业读入主机内存并执行，然后把计算结果向输出机输出。完成了上一批作业后，监督程序又从输入机上输入另一批作业，保存在磁带上，并按上述步骤重复处理。

**优点：**

监督程序不停地处理各个作业，从而实现了作业到作业的自动转接，减少了作业建立时间和手工操作时间，有效克服了人机矛盾，提高了计算机的利用率。

**不足：**

在作业输入和结果输出时，主机的高速CPU仍处于空闲状态，即等待慢速的输入/输出设备完成工作:此时主机处于“忙等”状态。

#### 脱机批处理系统

![](/img/课堂笔记/1-引论/脱机批处理系统.jpg)

增加一台不与主机直接相连而专门用于与输入/输出设备打交道的**卫星机**。

其功能是：

1. 从输入机上读取用户作业并放到输入磁带上。
2. 从输出磁带上读取执行结果并传给输出机。

**优势：**

1. 主机不直接与慢速的输入/输出设备打交道，而是与速度相对较快的**磁带机**（卫星机）发生关系，有效缓解了主机与设备的矛盾。
2. 主机与卫星机可并行工作，二者分工明确，可以发挥主机的高速计算能力。

**不足：**

每次主机内存中**仅存放一道作业**，每当它运行期间发出输入/输出(I/O)请求后，高速的CPU便处于等待低速的I/O完成状态，致使CPU空闲。

### 多道程序系统

> 这个就是作业里面的，多个程序共享CPU和IO设备，然后根据完成的时间计算各个设备的利用率。

所谓多道程序设计技术，就是指允许多个程序同时进入内存并运行。即同时把多个程序放入内存中，并允许它们交替在CPU中运行，它们共享系统中的各种硬、软件资源。当一道程序因I/O请求而暂停运行时，CPU便立即转去运行另一道程序。

多道程序设计技术不仅使CPU得到充分利用，同时也改善I/O设备和内存的利用率，从而提高了整个系统的资源利用率和系统吞吐量（即单位时间内处理作业(程序)的个数），最终提高了整个系统的效率。

#### 特点

单处理机系统中多道程序运行时的特点

1. 多道:计算机内存中同时存放几道相互独立的程序
2. 宏观上并行:同时进入系统的几道程序都处于运行过程中，即它们先后开始了各自的运行，但都未运行完毕;
3. 微观上串行:实际上，各道程序轮流地用CPU，并交替运行。

多道程序系统的出现，标志着操作系统**渐趋成熟**，先后出现了作业调度管理、处理机管理、存储器管理、外部设备管理、文件系统管理等功能。

### 分时系统

分时系统也叫**交互式系统**。

分时是指多个用户分享使用同一台计算机。多个程序分时共享硬件和软件资源。

![](/img/课堂笔记/1-引论/分时系统.jpg)

#### 特点∶

1. 多路性。若干个用户同时使用一台计算机。微观上看是各用户轮流使用计算机;宏观上看是各用户并行工作
2. 交互性。用户可根据系统对请求的响应结果，进一步向系统提出新的请求。这种能使用户与系统进行人机对话的工作方式，明显地有别于批处理系统，因而，分时系统又被称为**交互式系统**
3. 独立性。用户之间可以相互独立，互不干扰。系统保证各用户程序运行的完整性，不会发生相互混淆或破坏现象。
4. 及时性。系统可对用户的输入及时作出响应。分时系统性能的主要指标之一是**响应时间**，它是指:从终端发出命令到系统予以应答所需的时间。

考过一道选择题：

设计分时操作系统时，首先应考虑系统的（交互性和响应时间）。

### 分布式与嵌入式系统

分两类：

1. Network Operating System 网络操作系统
   在传统单机OS上加单独软件层，主要提供联网功能和资源的远程访问，实现多机互联
2. Distributed Operating System 分布式操作系统
   多台机器统一管理形成单一系统，相比网络操作系统，对用户和应用高度透明

微内核：

内核只完成不得不完成的功能，其他诸如文件系统、内存管理、设备驱动等的内容都被作为系统进程放到了用户态。

* 好处：架构独立，减小系统耦合，增加可移植性。
* 坏处：频繁系统调用效率难以保证。

## 操作系统的基本实现机制

> 当时没学到lab4的我看到这里是懵逼的

![](/img/课堂笔记/1-引论/异常.jpg)

异常与中断：中断主要由I/O设备、处理器时钟或定时器等硬件产生，可以被启用或禁用。陷阱是用户进程中某一特定指令执行的结果，在相同条件下，异常可以重现。例如内存访问错误、调试指令以及被零除。

系统调用：提供操作系统服务的编程接口；

与函数调用的区别：

1. 用户态到内核态，切换堆栈
2. 移植性差
3. 开销较大。

过程：先跳转到异常分发代码，通过异常类型调用`handle_sys`函数根据系统调用号完成系统调用的实现。

## 操作系统的特征

> 2014年期末考过

1. 并发
2. 共享
   • 互斥共享（打印机、变量）
   • 同时访问（宏观）
3. 虚拟
   • 多道程序中的CPU
   • SPOOLING（外围设备同时联机操作）
   • 虚拟存储
4. 异步性
   • 由于资源等因素的限制，程序的执行通常都不可能“一气呵成”，而是以“停停走走”的方式运行。

现代操作系统的基本特征：并发执行，资源共享(复用)，虚拟化管理，不确定性事件的处理。

## 操作系统的功能

1. 处理机管理
2. 存储器管理（内存）
3. 设备管理
4. 文件管理
5. 作业控制

